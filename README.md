# PancakeSwap æœ¬åœ°éƒ¨ç½²é¡¹ç›®

è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†å¦‚ä½•åœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªå®Œæ•´çš„ PancakeSwap DEX (å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€)ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ ¸å¿ƒåˆçº¦å’Œäº¤äº’ç¤ºä¾‹ã€‚

## é¡¹ç›®ç»“æ„

```
bsc-test/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ HelloWorld.sol          # ç®€å•çš„Hello Worldåˆçº¦
â”‚   â”œâ”€â”€ WBNB.sol               # åŒ…è£…BNBä»£å¸åˆçº¦
â”‚   â”œâ”€â”€ TestToken.sol          # æµ‹è¯•ç”¨ERC20ä»£å¸åˆçº¦
â”‚   â”œâ”€â”€ PancakeFactory.sol     # PancakeSwapå·¥å‚åˆçº¦ + LPä»£å¸åˆçº¦
â”‚   â””â”€â”€ PancakeRouter.sol      # PancakeSwapè·¯ç”±åˆçº¦
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy.js              # éƒ¨ç½²HelloWorldåˆçº¦
â”‚   â”œâ”€â”€ deployPancakeSwap.js   # éƒ¨ç½²å®Œæ•´PancakeSwap DEX
â”‚   â””â”€â”€ usePancakeSwap.js      # PancakeSwapä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ test/
â”‚   â””â”€â”€ HelloWorld.test.js     # HelloWorldåˆçº¦æµ‹è¯•
â””â”€â”€ hardhat.config.js          # Hardhaté…ç½®æ–‡ä»¶
```

## éƒ¨ç½²çš„åˆçº¦

### æ ¸å¿ƒåˆçº¦
- **WBNB**: åŒ…è£…BNBä»£å¸ï¼Œç”¨äºETH/Tokenäº¤æ˜“
- **PancakeFactory**: åˆ›å»ºå’Œç®¡ç†äº¤æ˜“å¯¹
- **PancakeRouter**: å¤„ç†æ‰€æœ‰äº¤æ˜“è·¯ç”±å’ŒæµåŠ¨æ€§æ“ä½œ
- **PancakePair**: æµåŠ¨æ€§æ± åˆçº¦ (ç”±Factoryè‡ªåŠ¨åˆ›å»º)

### æµ‹è¯•ä»£å¸
- **Token A (TKA)**: æµ‹è¯•ä»£å¸Aï¼Œæ€»é‡100ä¸‡
- **Token B (TKB)**: æµ‹è¯•ä»£å¸Bï¼Œæ€»é‡100ä¸‡

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä¸€é”®éƒ¨ç½²å’Œæµ‹è¯• (æ¨è)
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨æœ¬åœ°ç½‘ç»œ (ä¿æŒè¿è¡Œ)
npm run node

# 3. æ–°ç»ˆç«¯è¿è¡Œå®Œæ•´æµ‹è¯• (ä¸€é”®å®Œæˆæ‰€æœ‰æ“ä½œ)
npm run deploy-and-use
```

### æ–¹æ³•äºŒï¼šåˆ†æ­¥æ“ä½œ
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç¼–è¯‘åˆçº¦
npm run compile

# 3. å¯åŠ¨æœ¬åœ°ç½‘ç»œ (ä¿æŒè¿è¡Œ)
npm run node

# 4. æ–°ç»ˆç«¯éƒ¨ç½² PancakeSwap
npm run deploy-pancake

# 5. ä½¿ç”¨ç¤ºä¾‹ (å¯é€‰)
npm run use-pancake
```

**æ³¨æ„**: æ¨èä½¿ç”¨æ–¹æ³•ä¸€ï¼Œå®ƒä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰éƒ¨ç½²ã€æµåŠ¨æ€§æ·»åŠ å’Œäº¤æ˜“æµ‹è¯•ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
- ğŸ­ **å·¥å‚åˆçº¦**: åˆ›å»ºäº¤æ˜“å¯¹
- ğŸ”€ **è·¯ç”±åˆçº¦**: å¤„ç†äº¤æ˜“å’ŒæµåŠ¨æ€§
- ğŸ’± **ä»£å¸äº¤æ¢**: Token to Token, ETH to Token
- ğŸŠ **æµåŠ¨æ€§ç®¡ç†**: æ·»åŠ /ç§»é™¤æµåŠ¨æ€§
- ğŸ“Š **ä»·æ ¼é¢„è¨€æœº**: ç´¯ç§¯ä»·æ ¼è·Ÿè¸ª
- ğŸ›¡ï¸ **å®‰å…¨æ£€æŸ¥**: æ»‘ç‚¹ä¿æŠ¤ã€é‡å…¥ä¿æŠ¤

### ğŸ”§ åˆçº¦åœ°å€
éƒ¨ç½²æˆåŠŸåä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„åˆçº¦åœ°å€ï¼š
```
WBNB: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Factory: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
Router: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
Token A (TKA): 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
Token B (TKB): 0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9
```

## ä½¿ç”¨ç¤ºä¾‹

### ä»£å¸äº¤æ¢
```javascript
// 50 TKA -> TKB
await router.swapExactTokensForTokens(
    ethers.parseEther("50"),    // è¾“å…¥æ•°é‡
    0,                          // æœ€å°è¾“å‡º (æ»‘ç‚¹ä¿æŠ¤)
    [tokenA.address, tokenB.address],  // äº¤æ˜“è·¯å¾„
    user.address,               // æ¥æ”¶åœ°å€
    deadline                    // è¿‡æœŸæ—¶é—´
);
```

### æ·»åŠ æµåŠ¨æ€§
```javascript
await router.addLiquidity(
    tokenA.address,             // ä»£å¸Aåœ°å€
    tokenB.address,             // ä»£å¸Båœ°å€
    ethers.parseEther("100"),   // ä»£å¸Aæ•°é‡
    ethers.parseEther("200"),   // ä»£å¸Bæ•°é‡
    0,                          // æœ€å°Aæ•°é‡
    0,                          // æœ€å°Bæ•°é‡
    user.address,               // LPä»£å¸æ¥æ”¶åœ°å€
    deadline                    // è¿‡æœŸæ—¶é—´
);
```

## æµ‹è¯•

### è¿è¡ŒHello Worldæµ‹è¯•
```bash
npm test
```

### éªŒè¯PancakeSwapåŠŸèƒ½
éƒ¨ç½²åæ‰€æœ‰åŠŸèƒ½éƒ½ä¼šè‡ªåŠ¨æµ‹è¯•ï¼ŒåŒ…æ‹¬ï¼š
- åˆçº¦éƒ¨ç½²
- äº¤æ˜“å¯¹åˆ›å»º
- æµåŠ¨æ€§æ·»åŠ 
- ä»£å¸äº¤æ¢

## ç½‘ç»œé…ç½®

### æœ¬åœ°ç½‘ç»œ (é»˜è®¤)
- ç½‘ç»œ: Hardhatæœ¬åœ°ç½‘ç»œ
- RPC: http://127.0.0.1:8545/
- Chain ID: 31337

### BSCç½‘ç»œæ”¯æŒ
é¡¹ç›®å·²é…ç½®BSCä¸»ç½‘å’Œæµ‹è¯•ç½‘ï¼š
- BSCä¸»ç½‘: https://bsc-dataseed1.binance.org/
- BSCæµ‹è¯•ç½‘: https://data-seed-prebsc-1-s1.binance.org:8545/

## æŠ€æœ¯ç‰¹ç‚¹

- ğŸ”§ **Solidity 0.8.28**: æœ€æ–°ç‰ˆæœ¬Solidity
- ğŸ› ï¸ **Hardhatæ¡†æ¶**: ç°ä»£åŒ–å¼€å‘ç¯å¢ƒ
- ğŸ” **å®‰å…¨ä¼˜åŒ–**: é‡å…¥ä¿æŠ¤ã€æº¢å‡ºä¿æŠ¤
- ğŸ“ˆ **AMMç®—æ³•**: Uniswap V2å…¼å®¹
- ğŸ¯ **å®Œæ•´åŠŸèƒ½**: å·¥å‚+è·¯ç”±+LPå…¨å¥—åˆçº¦

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡æ–°éƒ¨ç½²ï¼Ÿ
A: é‡å¯æœ¬åœ°ç½‘ç»œåé‡æ–°è¿è¡Œ `npm run deploy-pancake`

### Q: äº¤æ˜“å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ä»£å¸ä½™é¢å’Œæˆæƒï¼Œç¡®ä¿æœ‰è¶³å¤Ÿçš„gasè´¹ç”¨

### Q: å¦‚ä½•è¿æ¥MetaMaskï¼Ÿ
A: æ·»åŠ æœ¬åœ°ç½‘ç»œ (RPC: http://127.0.0.1:8545, Chain ID: 31337)

### Q: éƒ¨ç½²åˆ°BSCæµ‹è¯•ç½‘ï¼Ÿ
A: ä¿®æ”¹hardhat.config.jsä¸­çš„ç½‘ç»œé…ç½®å¹¶æ·»åŠ ç§é’¥

## è®¸å¯è¯
MIT License

## è­¦å‘Š âš ï¸
è¿™æ˜¯ä¸€ä¸ªç”¨äºå­¦ä¹ å’Œæµ‹è¯•çš„é¡¹ç›®ï¼Œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚æ‰€æœ‰æµ‹è¯•è´¦æˆ·å’Œç§é’¥éƒ½æ˜¯å…¬å¼€çš„ï¼Œä¸è¦å‘å…¶ä¸­å‘é€çœŸå®èµ„é‡‘ã€‚